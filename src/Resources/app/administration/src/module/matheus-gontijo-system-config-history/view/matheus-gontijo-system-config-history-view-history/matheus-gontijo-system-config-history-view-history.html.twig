{% block matheus_gontijo_system_config_history_view_history %}
<div :class="pagePrefix()">
    {% block matheus_gontijo_system_config_history_view_history %}
    <sw-card
        :title="$tc(transPrefix('title'))"
        class="matheus-gontijo-system-config-history-view-history__grid-card"
        position-identifier="matheus-gontijo-system-config-history-view-history"
        :is-loading="isLoading"
        :large="true"
    >
        <table :id="pagePrefix()" cellspacing="0" cellpadding="0">
            <thead>
                <tr>
                    <th scope="col" v-on:click="changeSortByAndSortDirection('configuration_key')">
                        {{ $tc(transPrefix('grid.columnKey')) }}
                        <span
                            :class="pagePrefix('sort-direction')"
                            v-html="sortDirectionArrow('configuration_key')">
                        </span>
                    </th>
                    <th scope="col" v-on:click="changeSortByAndSortDirection('configuration_value_old')">
                        {{ $tc(transPrefix('grid.columnOldValue')) }}
                        <span
                            :class="pagePrefix('sort-direction')"
                            v-html="sortDirectionArrow('configuration_value_old')">
                        </span>
                    </th>
                    <th scope="col" v-on:click="changeSortByAndSortDirection('configuration_value_new')">
                        {{ $tc(transPrefix('grid.columnNewValue')) }}
                        <span
                            :class="pagePrefix('sort-direction')"
                            v-html="sortDirectionArrow('configuration_value_new')">
                        </span>
                    </th>
                    <th scope="col" v-on:click="changeSortByAndSortDirection('sales_channel_id')">
                        {{ $tc(transPrefix('grid.columnSalesChannel')) }}
                        <span
                            :class="pagePrefix('sort-direction')"
                            v-html="sortDirectionArrow('sales_channel_id')">
                        </span>
                    </th>
                    <th scope="col" v-on:click="changeSortByAndSortDirection('username')">
                        {{ $tc(transPrefix('grid.columnUsername')) }}
                        <span
                            :class="pagePrefix('sort-direction')"
                            v-html="sortDirectionArrow('username')">
                        </span>
                    </th>
                    <th scope="col" v-on:click="changeSortByAndSortDirection('action_type')">
                        {{ $tc(transPrefix('grid.columnAction')) }}
                        <span
                            :class="pagePrefix('sort-direction')"
                            v-html="sortDirectionArrow('action_type')">
                        </span>
                    </th>
                    <th scope="col" v-on:click="changeSortByAndSortDirection('created_at')">
                        {{ $tc(transPrefix('grid.columnCreatedAt')) }}
                        <span
                            :class="pagePrefix('sort-direction')"
                            v-html="sortDirectionArrow('created_at')">
                        </span>
                    </th>
                    <th scope="col"></th>
                </tr>
                <tr>
                    <th scope="col">
                        <input type="text" :class="pagePrefix('filter-input')" v-model="filterConfigurationKey" />
                    </th>
                    <th scope="col">
                        <input type="text" :class="pagePrefix('filter-input')" v-model="filterConfigurationValueOld" />
                    </th>
                    <th scope="col">
                        <input type="text" :class="pagePrefix('filter-input')" v-model="filterConfigurationValueNew" />
                    </th>
                    <th scope="col">
                        <input type="text" :class="pagePrefix('filter-input')" v-model="filterSalesChannelName" />
                    </th>
                    <th scope="col">
                        <input type="text" :class="pagePrefix('filter-input')" v-model="filterUsername" />
                    </th>
                </tr>
            </thead>

            <!-- @TODO: ESCAPE ALL OUTPUT FROM DATABASE -->

            <tbody v-if="rows.length > 0">
                <tr v-for="row in rows">
                    <td :class="pagePrefix('td')">
                        <span :class="pagePrefix('configuration-key')">
                            {{ row.configuration_key }}
                        </span>
                    </td>
                    <td :class="pagePrefix('td')">
                        <span :class="pagePrefix('configuration-value-old')">
                            <span v-if="row.configuration_value_old == null">
                                <span :class="pagePrefix('td-null')">null</span>
                            </span>
                            <span v-else>
                                {{ row.configuration_value_old }}
                            </span>
                        </span>
                    </td>
                    <td :class="pagePrefix('td')">
                        <span :class="pagePrefix('configuration-value-new')">
                            <span v-if="row.configuration_value_new == null">
                                <span :class="pagePrefix('td-null')">null</span>
                            </span>
                            <span v-else>
                                {{ row.configuration_value_new }}
                            </span>
                        </span>
                    </td>
                    <td :class="pagePrefix('td')">
                        <span :class="pagePrefix('sales-channel-name')">{{ row.sales_channel_name }}</span>
                    </td>
                    <td :class="pagePrefix('td')">{{ row.username }}</td>
                    <td :class="pagePrefix('td')">{{ row.action_type }}</td>
                    <td :class="pagePrefix('td')">{{ columnFormatDate(row.created_at) }}</td>
                    <td :class="pagePrefix('td')">
                        <span :class="pagePrefix('revert-button')">
                            {{ $tc(transPrefix('grid.revertButton')) }}
                        </span>
                    </td>
                </tr>
            </tbody>
        </table>

        <div :id="pagePrefix('pagination')" v-if="hasPagination">
            <span :class="pagePrefix('pagination-item')"></span>
        </div>

        <span :id="pagePrefix('no-results')" v-if="rows.length === 0">
            {{ $tc(transPrefix('grid.noResultsWereFound')) }}
        </span>

        {{ getPaginationItems() }}
    </sw-card>
    {% endblock %}
</div>
{% endblock %}
